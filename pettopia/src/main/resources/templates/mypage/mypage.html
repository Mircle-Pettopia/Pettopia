<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{layout}">
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
    <title>Pettopia</title>
    <meta charset="UTF-8">
</head>
<body>
	<div layout:fragment="content">
<style>
#backColor{
	margin-top: 30px;
	background: rgb(248, 245, 250);
	padding: 10px 0px 10px 0px !important;
	border-radius: 15px;
	padding: 10px;
}

th, td {
text-align: center;
}

#btnCss{
float: right;
position: relative;
bottom: 10px;
margin-top: 8px;
}

#filter{
margin-top: 8px;
text-align: center;
}

#filter li {
display: inline-block;
padding-top: 10px;
border: 1px solid rgb(235, 235, 235);
border-radius: 10px;
background-color: white;
padding: 8px 22px 5px 22px;
} 

tbody img{
width: 100px;
}
</style>

    <div class="container">
			<div class="row">
                <th:block th:replace="/layout/navbar :: navbarFragment"></th:block>

                <!-- 마이페이지 주문관리 -->
				<div class="col-md-8 col-lg-10 p-b-80 fontSize">
					<div class="p-r-45 p-r-0-lg m-t-50">
						<h1>
							<span style="font-weight: bold; color: rgb(201, 159, 240);">| </span>주문관리
						</h1>

						<!-- 배송 상태 -->
						<div class="status">
							<div class="status-icons">
								<img src="images/icons/check-bill.png" alt="">
								<img src="images/icons/giftbox.png" alt="">
								<img src="images/icons/cargo-truck.png" alt="">
								<img src="images/icons/checked.png" alt="">
							</div>

							<div class="status-text">
								<span>결제완료</span>
								<span>배송전</span>
								<span>배송중</span>
								<span>배송완료</span>
							</div>

							<div class="status-link">
								<a href="" class="fontColor">2</a>
								<a href="" class="fontColor">0</a>
								<a href="" class="fontColor">1</a>
								<a href="" class="fontColor">10</a>
							</div>
						</div>

						<!-- 검색 기능 -->
						<div class="row m-t-20 m-b-20" id="backColor">
							<div class="col-md-2">
								<select name="psss_select" class="allOrderSearch">
									<option value="0">전체 주문처리 상태</option>
									<!--결제상태-->
									<option  th:each="plist : ${code.PS}"
													th:value="${plist?.codTitle}" 
													th:utext="${plist?.codTitle}"></option>
									<!--배송상태-->
									<option  th:each="slist : ${code.SS}"
													th:value="${slist?.codTitle}" 
													th:utext="${slist?.codTitle}"></option>
								</select>
							</div>
							<div class="col-md-4">
								<div id="filter">
									<ul>
										<a href="#" class="fontColor"><li>하루</li></a>
										<a href="#" class="fontColor"><li>일개월</li></a>
										<a href="#" class="fontColor"><li>일주일</li></a>
										<a href="#" class="fontColor"><li>삼개월</li></a>
									</ul>
								</div>
							</div>
							<div class="col-md-5">
								<input type="date" id="frDt" name="frDt" class="datePut">
								<span style="margin: 0px 10px;"> - </span>
								<input type="date" id="toDt" name="toDt" class="datePut">
							</div>
							<div class="col-md-1">
								<div id="btnCss">
									<button type="button" class="btn btnPush btnLightBlue" name="searchBtn">
										검색
									</button>
								</div>
							</div>
						</div>

						
						<!-- 상품주문정보 -->
						<div style="height: 800px;">
							<h4 style="margin-bottom: 20px;">상품주문정보</h4>
							<!--구매한 주문정보-->
							<div>
								<table class="table">
									<colgroup>
										<col width="20%">
										<col width="20%">
										<col width="25%">
										<col width="13%">
										<col width="11%">
										<col width="11%">
									</colgroup>
									<thead style="text-align: center;">
										<tr >
											<th scope="col">
												주문일자 <br/>
												주문번호
											</th>
											<th scope="col">이미지</th>
											<th scope="col">상품정보</th>
											<th scope="col">상품금액</th>
											<th scope="col">주문처리상태</th>
											<th scope="col">결제여부</th>
										</tr>
									</thead>
									<tbody>
										<tr th:each="order : ${list}">
											<td rowspan="">
												<p th:text="${#dates.format(order.ordrDate, 'yyyy-MM-dd')}" class="orderDate"></p>
												<a class="fontColor" th:href="@{/orderListDtl(ordrId=${order.ordrId})}" style="text-decoration: underline; text-underline-position:under;">
													<p th:text="${order.ordrId}" class="orderId"></p>
												</a>
											</td>
											<td><a href="#" class="fontColor"><img src="${order.prdtImg}" rel="product"></a></td>
											<td>
												<strong><a href="#" class="fontColor" th:text="${order.prdtNm}"></a></strong>
											<div class="option">
												[옵션 : 
												<sapn th:text="${order.optDetaNm}"></sapn>/
												<span id="size"></span>
												]
											</div>
											</td>
											<td><span th:text="${#numbers.formatInteger(order.price,3,'COMMA')}"></span><span>원</span></td>
											<td th:text="${order.shipSt}"></td>
											<td th:text="${order.prcSt}"></td>
										</tr>
									</tbody>
									<tfoot>
										<tr>
											<td colspan="6" style="text-align: right; padding-top: 10px; padding-bottom: 10px;">
												상품구매금액 <sapn id="orderPrice"></sapn> + 배송비 <sapn>2,200</sapn> = 합계 : <span style="color: red; font-weight: bold; font-size: 14px;">37,000원</span>
											</td>
										</tr>
									</tfoot>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script th:inline="javascript">

			let price = 0;
			let test = /*[[${list}]]*/
			console.log(test);

			test.map((data) => {
				price += data.price;
			})
			console.log(price);

			$('#orderPrice').text(price);
		</script>
	</div>
	</body>
</html>
</html>