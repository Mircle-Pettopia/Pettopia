<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <!-- <meta name="_csrf" th:content="${_csrf.token}">
    <meta name="_csrf_header" th:content="${_csrf.headerName}"> 
    <csrf disabled="true" /> -->
    <title>Pettopia Login</title>
    <!-- Refle CSS -->
    <link rel="stylesheet" type="text/css" href="/css/refle.css">
    <!-- Bootstrap CSS v4.1.x -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <!-- Fontsawesome CDN -->
    <script type="text/javascript" src="https://use.fontawesome.com/e69b0efea7.js"></script>
    <!-- Google Fonts -->
    <link type="text/css" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;900&display=swap" rel="stylesheet">

    <style>
        .apiBnt{
            cursor: pointer;
        }
    </style>
</head>

<body class="refle-login">
    <section class="h-100">
        <div class="container h-100">
            <div class="row justify-content-md-center h-100">
                <div class="card-wrapper">
                    <h2 class="title text-center">
                        Pettopia
                    </h2>
                    <div class="card fat">
                        <div class="card-body">
                            <div class="card-title">Login</div>
                            <form method="post" class="needs-validation" novalidate action="/login">
                                <div class="form-group">
                                    <label for="email">ID</label>
                                    <input id="email" type="email" class="form-control" name="email"
                                        placeholder="example@company.com" value="" required autofocus>
                                    <div class="invalid-feedback">
                                        email is invalid
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="password">Password</label>
                                    <div class="input-group mb-3">
                                        <input id="password" type="password" class="form-control" name="password"
                                            placeholder="********" required>
                                        <div class="input-group-append">
                                            <span class="btn btn-primary text-white input-group-text">
                                                <i id="#password" class="toggle-password fa fa-eye"></i>
                                            </span>
                                        </div>
                                        <div class="invalid-feedback">
                                            Password is required
                                        </div>
                                    </div>
                                </div>

                                <div class="form-group">
                                    <button type="submit" class="btn btn-sm btn-primary btn-block" id="loginBtn">
                                        Login
                                    </button>
                                </div>
                                <div style="text-align: center;">
                                    <img class="apiBnt"  src="/img/산부인과-포해피우먼-문의-카카오플러스친구-버튼.webp" width="50px">
                                    <img class="apiBnt" src="/img/btnG_아이콘원형.png" width="50px">
                                </div>
                                <div class="register-section text-center">
                                <br/>
                                    회원가입이 필요하신가요?<a href="/signUp"> 회원가입하기</a>
                                </div>
                            </form>
                        </div>
                    </div>
                    <div class="footer">
                        Copyright &copy; 2020 &mdash; Your Company
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <!-- <script type="text/javascript" src=/js/jquery-3.5.0.min.js"></script> -->
    <script type="text/javascript" src="/js/popper.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/refle.js"></script>
    <script>
        /*var token = $("meta[name='_csrf']").attr("content");
        var header = $("meta[name='_csrf_header']").attr("content");
        $(document).ajaxSend(function(e, xhr, options) { xhr.setRequestHeader(header, token); });*/
        /*var header = $("meta[name='_csrf_header']").attr('content');
        var token = $("meta[name='_csrf']").attr('content');
        console.log(header);
        console.log(token);

        $().ready(() => {
            $('#loginBtn').on('click',()=>{
                test();
            })
        })

        const test = ()=>{
            let id = $('#id').val();
            let pw = $('#password').val();
            $.ajax({
                url : "login",
                data : {meId : id, pw : pw},
                beforeSend: function(xhr){
                    xhr.setRequestHeader(header, token);
                },
                dataType: 'JSON',
                type : "POST",
                success : (data)=>{
                    console.log(data);

                    if(data.code == "200"){
					// 정상 처리 된 경우
                        window.location = response.item.url;	//이전페이지로 돌아가기
                    } else {
                        alert(response.message);
                    }
                },
                error : (rej) => {
                    console.log(rej);
                }
            })
        }*/

    </script>
</body>

</html>
