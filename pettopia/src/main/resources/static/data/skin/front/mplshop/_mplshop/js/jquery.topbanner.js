!function(c,u,v,g){var t=!0;c.isTopbanner=function(e){return!!c(e).data("Topbanner")},c.Topbanner=function(e,n){var p=this,a="click touchend MSPointerUp",r="active";p.$el=c(e),p.el=e,p.$el.data("Topbanner",p);var l=p.$el,d={};p.options=c.extend({},c.Topbanner.defaults,n),d={init:function(){l.imageContainer=c(p.options.imageContainer,l),l.slides=c(p.options.imageSelector,l.imageContainer),l.containerSelector=p.options.imageSelector.substr(0,p.options.imageSelector.search(" ")),l.slidesContainer=c(l.containerSelector,l.imageContainer),l.slidesCount=l.slides.length,l.responsiveSlides=c(p.options.responsiveSelector,l.imageContainer),l.responsiveContainerSelector=p.options.responsiveSelector.substr(0,p.options.responsiveSelector.search(" ")),l.responsiveSlidesContainer=c(l.responsiveContainerSelector,l.imageContainer),l.responsiveSlidesCount=l.responsiveSlides.length,l.slides.show(),l.responsiveSlides.show(),l.animating=!1,l.currentSlide=parseInt(0,10),l.animatingTo=l.currentSlide,l.atEnd=0===l.currentSlide||l.currentSlide===l.last,l.count=l.checkResponsive()?l.responsiveSlidesCount:l.slidesCount,l.nowResponsive=l.checkResponsive(),l.args={},l.prop="",l.stopped=!1,l.started=!1,l.startTimeout=null,l.transitionsSetting=l.transitions(),l.ensureAnimationEnd="",l.doMath(),l.setup("init"),d.displayBtn.setup(),p.options.controlNav&&d.controlNav.setup(),p.options.directionNav&&d.directionNav.setup(),p.options.autoPlay&&(l.hover(function(){l.pause()},function(){l.stopped||l.play()}),0<p.options.interval?l.startTimeout=setTimeout(l.play,p.options.interval):l.play()),c(u).bind("resize orientationchange focus",d.resize)},displayBtn:{setup:function(){var e='<div class="topBannerDisplayBtn">';e+=p.options.useButtonText?'<span class="closeBtn"><span class="overText"><span class="textTop">'+p.options.closeText+'</span><span class="textBottom"></span></span></span>':'<span class="closeBtn"></span>',e+=p.options.useButtonText?'<span class="openBtn"><span class="overText"><span class="textBottom"></span><span class="textTop">'+p.options.openText+"</span></span></span>":'<span class="openBtn"></span>',e+="</div>";var n=d.cookie.getCookie(),t=d.cookie.getCookie()?1:1700;l.append(e),l.displayBtn=c(".topBannerDisplayBtn > span",l),d.displayBtn.update(n),l.displayAnimate(n,t),l.displayBtn.bind(a,function(e){e.preventDefault(),l.displayAnimate(l.getDisplayTarget(c(this).hasClass("closeBtn")),1)})},update:function(e){var n=l.find(".topBannerDisplayBtn");e?n.removeClass(r).find(".closeBtn").hide(1).siblings().show(1):n.addClass(r).find(".closeBtn").show(1).siblings().hide(1),d.cookie.setCookie(e)}},controlNav:{setup:function(){var e,n,t="thumbnails"===p.options.controlNav?"controlThumbs":"controlPaging",i=1;if(l.controlNavScaffold=c('<ol class="topBannerControlNav '+t+'"></ol>'),1<l.pagingCount)for(var o=0;o<l.pagingCount;o++){n=l.nowResponsive?l.responsiveSlides.eq(o):l.slides.eq(o),g===n.attr("thumb-alt")&&n.attr("thumb-alt","");var s=""!==n.attr("thumb-alt")?s=' alt="'+n.attr("thumb-alt")+'"':"";e="thumbnails"===p.options.controlNav?'<img src="'+n.attr("data-thumb")+'"'+s+"/>":'<a href="#">'+i+"</a>",l.controlNavScaffold.append("<li>"+e+"</li>"),i++}l.append(l.controlNavScaffold),d.controlNav.set(),d.controlNav.active(),l.controlNavScaffold.delegate("a, img",a,function(e){e.preventDefault();var n=c(this),t=l.controlNav.index(n);n.hasClass(r)||(l.direction=t>l.currentSlide?"next":"prev",l.slideAnimate(t))})},set:function(){var e="thumbnails"===p.options.controlNav?"img":"a";l.controlNav=c(".topBannerControlNav li "+e,l)},active:function(){l.controlNav.removeClass(r).eq(l.animatingTo).addClass(r)},update:function(e,n){1<l.pagingCount&&"add"===e?l.controlNavScaffold.append(c('<li><a href="#">'+(l.controlNav.length+1)+"</a></li>")):1===l.pagingCount?l.controlNavScaffold.find("li").remove():l.controlNav.last().closest("li").remove(),d.controlNav.set(),1<l.pagingCount&&l.pagingCount!==l.controlNav.length?l.update(n,e):d.controlNav.active()}},directionNav:{setup:function(){var e=c('<div class="topBannerDirectionNav"><div class="inner"><span class="prevBtn"></span><span class="nextBtn"></span></div></div>');l.prepend(e),l.directionNavContainer=c(".topBannerDirectionNav > .inner",l),l.directionNav=c("span",l.directionNavContainer),d.directionNav.update(),d.directionNav.set(),l.directionNav.bind(a,function(e){e.preventDefault(),c(this).hasClass("disabled")||l.slideAnimate(l.getTarget(c(this).hasClass("nextBtn")))})},update:function(){var e="disabled";1===l.pagingCount?l.directionNav.addClass(e).attr("tabindex","-1"):p.options.infinityMove?l.directionNav.removeClass(e).removeAttr("tabindex"):0===l.animatingTo?l.directionNav.removeClass(e).filter(".prevBtn").addClass(e).attr("tabindex","-1"):l.animatingTo===l.last?l.directionNav.removeClass(e).filter(".nextBtn").addClass(e).attr("tabindex","-1"):l.directionNav.removeClass(e).removeAttr("tabindex")},set:function(){l.directionNavContainer.height(l.height)}},cookie:{setCookie:function(e){l.cookie(!0,e)},getCookie:function(){return l.cookie(!1,"")}},resize:function(){!l.animating&&l.is(":visible")&&(c(p.options.responsiveSelector,l.imageContainer).css({display:"block",height:"auto"}),l.checkResponsive()?(l.nowResponsive||(l.nowResponsive=!0,l.imageContainer.append(l.responsiveSlidesContainer),l.slidesContainer.detach(),l.count=l.responsiveSlidesCount,l.doMath(),l.imageContainer.height(l.height),l.currentSlide=l.responsiveSlidesCount==l.slidesCount?l.currentSlide:0,l.setProps(l.height,"","setTotal"),l.update(l.pagingCount,l.responsiveSlidesCount!=l.slidesCount?l.responsiveSlidesCount>l.slidesCount?"add":"remove":"even")),l.doMath(),l.getDisplayState()?l.imageContainer.height(l.height):l.imageContainer.css({height:l.height,"margin-top":-l.height}),c(p.options.responsiveSelector,l.imageContainer).height(l.height),l.setProps(l.height,"","setTotal")):l.nowResponsive&&(l.nowResponsive=!1,l.imageContainer.append(l.slidesContainer),l.responsiveSlidesContainer.detach(),l.count=l.slidesCount,l.doMath(),l.imageContainer.height(l.height),l.currentSlide=l.responsiveSlidesCount==l.slidesCount?l.currentSlide:0,l.setProps(l.height,"","setTotal"),l.update(l.pagingCount,l.responsiveSlidesCount!=l.slidesCount?l.responsiveSlidesCount>l.slidesCount?"remove":"add":"even"),l.getDisplayState()?l.imageContainer.height(l.height):l.imageContainer.css({height:l.height,"margin-top":-l.height})),d.directionNav.set())}},l.checkResponsive=function(){return!!(p.options.responsive&&c(u).width()<p.options.responsiveSize)},l.displayAnimate=function(e,n){var t=l.imageContainer,i=e?l.height:0;l.setProps(i,"marginTop","",n,"displayBtn"),setTimeout(function(){t.animate(l.args,p.options.duration,function(){d.displayBtn.update(e)})},n)},l.slideAnimate=function(e,n,t){if(p.options.infinityMove||e===l.currentSlide||(l.direction=e>l.currentSlide?"next":"prev"),!l.animating&&(l.canAdvance(e)||t)&&l.is(":visible")){var i=l.checkResponsive()?l.responsiveSlidesContainer:l.slidesContainer,o=l.checkResponsive()?l.responsiveSlides:l.slides;l.animating=!0,l.animatingTo=e,n&&l.pause(),p.options.controlNav&&d.controlNav.active(),o.removeClass(r).eq(e).addClass(r),l.atEnd=0===e||e===l.last,p.options.directionNav&&d.directionNav.update(),e!==l.last||p.options.infinityMove||l.pause();var s,a=o.filter(":first").height();s=0===l.currentSlide&&e===l.count-1&&p.options.infinityMove&&"next"!==l.direction?0:l.currentSlide===l.last&&0===e&&p.options.infinityMove&&"prev"!==l.direction?(l.count+1)*a:(e+l.cloneOffset)*a,l.setProps(s,"","",p.options.duration,""),l.transitionsSetting?(p.options.infinityMove&&l.atEnd||(l.animating=!1,l.currentSlide=l.animatingTo),i.unbind("webkitTransitionEnd transitionend"),i.bind("webkitTransitionEnd transitionend",function(){clearTimeout(l.ensureAnimationEnd),l.wrapup(a)}),clearTimeout(l.ensureAnimationEnd),l.ensureAnimationEnd=setTimeout(function(){l.wrapup(a)},p.options.duration+100)):setTimeout(function(){i.animate(l.args,p.options.duration,function(){l.wrapup(a)})},dur)}},l.wrapup=function(e){0===l.currentSlide&&l.animatingTo===l.last&&p.options.infinityMove?l.setProps(e,"","jumpEnd"):l.currentSlide===l.last&&0===l.animatingTo&&p.options.infinityMove&&l.setProps(e,"","jumpStart"),l.animating=!1,l.currentSlide=l.animatingTo},l.animateSlides=function(){!l.animating&&t&&l.slideAnimate(l.getTarget(!0))},l.pause=function(){clearInterval(l.animatedSlides),l.animatedSlides=null,l.playing=!1},l.play=function(){l.playing&&clearInterval(l.animatedSlides),l.animatedSlides=l.animatedSlides||setInterval(l.animateSlides,p.options.interval),l.started=l.playing=!0},l.stop=function(){l.pause(),l.stopped=!0},l.canAdvance=function(e){var n=l.last;return e!==l.currentSlide&&(!!p.options.infinityMove||(!l.atEnd||0!==l.currentSlide||e!==n||"next"===l.direction)&&(!l.atEnd||l.currentSlide!==n||0!==e||"next"!==l.direction))},l.getDisplayTarget=function(e){return!!e},l.getDisplayState=function(){return!!l.find(".topBannerDisplayBtn").hasClass(r)},l.getTarget=function(e){return l.direction=e?"next":"prev","next"===l.direction?l.currentSlide===l.last?0:l.currentSlide+1:0===l.currentSlide?l.last:l.currentSlide-1},l.setProps=function(e,n,t,i,o){var s=o?l.imageContainer:l.nowResponsive?l.responsiveSlidesContainer:l.slidesContainer,a=-1*function(){switch(t){case"setTotal":return(l.currentSlide+l.cloneOffset)*e;case"setTouch":return e;case"jumpEnd":return l.count*e;case"jumpStart":default:return e}}()+"px";n=o?n:l.prop,l.transitionsSetting&&!o&&(a="translate3d(0,"+a+",0)",transformDur=i!==g?i/1e3+"s":"0s",s.css("-"+l.pfx+"-transition-duration",transformDur),s.css("transition-duration",transformDur)),l.args[n]=a,(l.transitionsSetting&&!o||i===g)&&s.css(l.args),s.css("transform",a)},l.setup=function(e){var n;if(l.imageContainer.css({overflow:"hidden",position:"relative"}),l.cloneCount=0,(l.cloneOffset=0)<l.slidesCount)for(var t=0;t<l.slidesCount;t++){var i=l.slides.eq(t),o=i.find("img").attr("src");i.css("background","url("+o+") no-repeat top center")}1==p.options.infinityMove&&(l.cloneCount=2,l.cloneOffset=1,l.slidesContainer.append(l.slides.first().clone().addClass("clone").removeAttr("id").attr("aria-hidden","true")).prepend(l.slides.last().clone().addClass("clone").removeAttr("id").attr("aria-hidden","true")),l.responsiveSlidesContainer.append(l.responsiveSlides.first().clone().addClass("clone").removeAttr("id").attr("aria-hidden","true")).prepend(l.responsiveSlides.last().clone().addClass("clone").removeAttr("id").attr("aria-hidden","true"))),n=l.currentSlide+l.cloneOffset,l.slidesContainer.height(200*(l.slidesCount+l.cloneCount)+"%").css("position","absolute").width("100%"),l.responsiveSlidesContainer.height(200*(l.slidesCount+l.cloneCount)+"%").css("position","absolute").width("100%"),l.doMath(),l.imageContainer.css({height:l.height,"margin-top":-l.height}),c(p.options.responsiveSelector,l.imageContainer).css({display:"block",height:l.height}),c(p.options.imageSelector,l.imageContainer).css({height:l.height,display:"block"}).find("img").css("visibility","hidden"),l.nowResponsive?l.slidesContainer.detach():l.responsiveSlidesContainer.detach(),l.setProps(n*l.height)},l.doMath=function(){var e=l.nowResponsive?l.responsiveSlides.first():l.slides.first();l.height=l.realHeight(e),l.pagingCount=l.nowResponsive?l.responsiveSlidesCount:l.slidesCount,l.last=l.nowResponsive?l.responsiveSlidesCount-1:l.slidesCount-1},l.realHeight=function(e){var n;return e.find("img").each(function(){n=this.height}),n},l.update=function(e,n){e<l.currentSlide?l.currentSlide+=1:e<=l.currentSlide&&0!==e&&--l.currentSlide,l.animatingTo=l.currentSlide,p.options.controlNav&&("add"===n||l.pagingCount>l.controlNav.length?d.controlNav.update("add"):("remove"===n||l.pagingCount<l.controlNav.length)&&(l.currentSlide>l.last&&(--l.currentSlide,--l.animatingTo),d.controlNav.update("remove",l.last))),p.options.directionNav&&d.directionNav.update()},l.transitions=function(){var e=v.createElement("div"),n=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var t in n)if(e.style[n[t]]!==g)return l.pfx=n[t].replace("Perspective","").toLowerCase(),l.prop="-"+l.pfx+"-transform",!0;return!1},l.cookie=function(e,n){var t=u.location.hostname+"_topbanner_"+p.options.cookieName;if(!e){t+="=";for(var i=decodeURIComponent(v.cookie).split(";"),o=0;o<i.length;o++){for(var s=i[o];" "==s.charAt(0);)s=s.substring(1);if(0==s.indexOf(t))return"true"==s.substring(t.length,s.length)}return""}var a=n,r=new Date;r.setTime(r.getTime()+864e5);var l="expires="+r.toUTCString();v.cookie=t+"="+a+";"+l+";path=/"},1==p.options.operation?d.init():(l.imageContainer=c(p.options.imageContainer,l),l.imageContainer.remove())},c(u).blur(function(e){t=!1}).focus(function(e){t=!0}),c.Topbanner.defaults={operation:!0,infinityMove:!0,autoPlay:!0,interval:4e3,duration:600,controlNav:!1,directionNav:!0,useButtonText:!0,openText:"OPEN",closeText:"CLOSE",cookieName:"active",imageContainer:".topBannerImageContainer",imageSelector:".topBannerImage > li",responsive:!1,responsiveSelector:".topBannerImageResponsive > li",responsiveSize:800},c.fn.Topbanner=function(e){return this.each(function(){new c.Topbanner(this,e)})}}(jQuery,window,document);